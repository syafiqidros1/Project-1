{  Project:  EE-8 Assignment  Platform: Parallax Project USB Board  Revision: 1.2  Author:   Syafiq Idros  Date:     14th Nov 2021  Log:    Date: Desc    14/11/2021: Call Function to read sensor added    15/11/2021: Forward/Reverse & Stop Movement.    21/11/2021: Added proper usage of Cogstop.}CON  '' [ Declare Pins for Sensors ]  ' Ultrasonic 1 (Front) - I2C Bus 1  ultra1SCL = 6  ultra1SDA = 7  ' Ultrasonic 2 (Back) - I2C Bus 2  ultra2SCL = 8  ultra2SDA = 9  ' TOF 1 (Front) - I2C Bus 3  tof1SCL = 0  tof1SDA = 1  tof1RST = 5  ' TOF 2 (Back) - I2C Bus 4  tof2SCL = 2  tof2SDA = 3  tof2RST = 4  tofAdd = $29VAR  long cog1ID, cog1Stack[128]  long _Ms_001OBJ  'Term      : "FullDuplexSerial.spin"  'UART communication for debugging  Ultra     : "EE-7_Ultra_v2.spin"     '<-- Embedded a 2-element obj within  ToF[2]    : "EE-7_ToF.spin"PUB Start(mainMSVal, mainTOF1Add, mainTOF2Add, mainUltra1Add, mainUltra2Add)                   ' Runs on Cog 1  _Ms_001 := mainMSVal  Stop  cog1ID := cognew(sensorCore(mainTOF1Add, mainTOF2Add, mainUltra1Add, mainUltra2Add), @cog1Stack)  returnPUB Stop  if cog1ID    cogstop (cog1ID~)PUB sensorCore(mainTOF1Add, mainTOF2Add, mainUltra1Add, mainUltra2Add)  Ultra.Init(ultra1SCL, ultra1SDA, 0) 'Assigning & Init the first element  Ultra.Init(ultra2SCL, ultra2SDA, 1) 'Assigning & Init the second element  tofInit ' Perform init for both ToF sensors  ' Run & get readings  repeat    long[mainUltra1Add] := Ultra.readSensor(0)    long[mainUltra2Add] := Ultra.readSensor(1)    long[mainTOF1Add]   := ToF[0].GetSingleRange(tofAdd)    long[mainTOF2Add]   := ToF[1].GetSingleRange(tofAdd)    'Pause(50)PRI tofInit | i  ToF[0].Init(tof1SCL, tof1SDA, tof1RST)  ToF[0].ChipReset(1)  'Pause(1000)  ToF[0].FreshReset(tofAdd)  ToF[0].MandatoryLoad(tofAdd)  ToF[0].RecommendedLoad(tofAdd)  ToF[0].FreshReset(tofAdd)  ToF[1].Init(tof2SCL, tof2SDA, tof2RST)  ToF[1].ChipReset(1)  'Pause(1000)  ToF[1].FreshReset(tofAdd)  ToF[1].MandatoryLoad(tofAdd)  ToF[1].RecommendedLoad(tofAdd)  ToF[1].FreshReset(tofAdd)  returnPRI Pause(ms) | t  t := cnt - 1088  repeat (ms #> 0)    waitcnt(t += _Ms_001)  return